const int velocity_input = 2;
const int spin_rate_input = 3;
//Output prediction to a pin, 0 = Offspeed and 1 = Fastball
const int prediction_output = 4;


void setup() {
  // put your setup code here, to run once:
  pinMode(velocity_input,INPUT);
  pinMode(spin_rate_input,INPUT);
  pinMode(prediction_output,OUTPUT);
  Serial.begin(115200);
}

void loop() {
  // put your main code here, to run repeatedly:

}

void accuracy(uint8_t y_pred[],uint8_t y_test[],int N) {
  int count = 0;
  for(int i = 0; i < N; i++) {
    if(y_pred[i] == y_test[i]) {
      count += 1;
    }
  }
  float accuracy = count/N;
  Serial.print("Accuracy: ");
  Serial.print(accuracy);
}


//1 = right, 0 = left
uint8_t predict_two__pitch( int throwing_arm, float velocity, float spin_rate) {
  //W = weight vector from pretrained SVM Model
  float w[3] = {0.17857464, -9.28750256, -0.17418126};
  //Bias from pretrained SVM Model
  float b = 8.792953233777773;
  //Feature Vector X = [Velocity, Spin Rate]
  float X[3] = {throwing_arm, velocity, spin_rate};  
  //Linear SVM equation to get predicted value
  float y = X[0]*w[0] + X[1]*w[1] + X[2]*w[2] + b;  
  uint8_t pred = 0;
  if (y > 1){
    pred = 1;
  } else {
    pred = 0;
  }
  Serial.print(pred);
  digitalWrite(prediction_output,pred);
}

//ages 10-18, 19 == college, else is MLB
uint8_t predict_experience_two_pitch(float velocity, float spin_rate, int throwing_arm, int experience_level) {
  float w[3] = {};
  float b = 0.0;
  if (experience_level == 10){
    w[0] = 0.10539528;
    w[1] = -8.46501197;
    w[2] = -0.22999243;
    b = 5.777999807344543;
  } else if(experience_level == 11) {
    w[0] = 0.09265578;
    w[1] = -10.83523682;
    w[2] = -0.30754786;
    b = 5.512818958474918;
  } else if(experience_level == 12) {
    w[0] = 0.57615254;
    w[1] = -5.89782755;
    w[2] = -0.1991475;
    b = 23.948104401320215;
  } else if(experience_level == 13) {
    w[0] = 0.4734337;
    w[1] = -7.28862241;
    w[2] =  -0.22939487;
    b = 20.874725247194974;
  } else if(experience_level == 14) {
    w[0] = 0.40007575;
    w[1] =  -8.28936433;
    w[2] = -0.23210285;
    b = 17.814001001248947;
  } else if(experience_level == 15) {
    w[0] = 0.34701303;
    w[1] = -8.72027233;
    w[2] = -0.21694176;
    b = 14.665734642344788;
  } else if(experience_level == 16) {
    w[0] = 0.24750479;
    w[1] =  -8.78331579;
    w[2] =  -0.19939842;
    b = 12.226166822671564;
  } else if(experience_level == 17) {
     w[0] = 0.21380246;
     w[1] = -9.12554877;
     w[2] = -0.19418604;
     b = 10.903910720433455;
  } else if(experience_level == 18) {
    w[0] = 0.15224376;
    w[1] =  -9.32430858;
    w[2] =  -0.185717;
    b = 9.894485326118879;    
  } else if(experience_level == 19) {
    w[0] = 0.16818656;
    w[1] = -9.35751966;
    w[2] = -0.17962258;
    b = 8.903064062318878;
  } else {
    w[0] = 0.17857464;
    w[1] = -9.28750256;
    w[2] = -0.17418126;
    b = 8.792953233777773;
  }
  //Linear SVM equation to get predicted value
  float y = w[0]*throwing_arm + w[1]*velocity + w[2]*spin_rate + b;  
  uint8_t pred = 0;
  if (y > 1){
    pred = 1;
  } else {
    pred = 0;
  }
  Serial.print(pred);
  digitalWrite(prediction_output,pred);
}

uint8_t predict_seven_pitch(float velocity, float spin_rate, int throwing_arm) {
  int votes[21] = {};
  float w[21][3] = {{0.00000000e+00, -9.02715621e-01,  9.77491538e-02},
  { 4.94073640e-05,  8.14352677e-04,  1.61067184e-02},
  {-5.55835831e-01,  1.81048063e+00,  7.26009077e-02},
  { 4.94073640e-05,  8.14352677e-04,  1.61067184e-02},
  { 4.94073640e-05,  8.14352677e-04,  1.61067184e-02},
  { 3.20928416e-01, -1.25234128e+00,  3.83802961e-02},
  { 0.00000000e+00,  3.27482718e-03,  2.63506881e-02},
  { 2.09213132e-03,  6.71216087e-03, -6.43026232e-02},
  { 0.00000000e+00,  3.27482718e-03,  2.63506881e-02},
  { 0.00000000e+00,  3.27482718e-03,  2.63506881e-02},
  { 2.08232829e-01,  3.08854999e+00, -7.23585217e-02},
  { 7.67145641e-05, -4.60388263e-04, -1.23778546e-02},
  { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
  { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
  { 0.00000000e+00, -1.51181495e-03, -1.99164649e-02},
  {-4.65142726e-05,  4.60405933e-04,  1.23783297e-02},
  {-4.65142726e-05,  4.60405933e-04,  1.23783297e-02},
  { 1.99216265e-01, -2.24701324e+00,  5.75598824e-02},
  { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
  { 0.00000000e+00, -1.51181495e-03, -1.99164649e-02},
  { 0.00000000e+00, -1.51181495e-03, -1.99164649e-02}};
  float b[21] = {-5.45398808,  -1.00003293, -26.88877061,  -1.00003293,
  -1.00003293,   1.32495099,  -1.00000001,   9.33491218,
  -1.00000001,  -1.00000001, -17.18962364,   0.99992325,
  1.0        ,  -1.0        ,   1.00000001,  -0.99998449,
  -0.99998449,   5.19839461,  -1.0        ,   1.00000001,
  1.00000001}; 
  float pred[21] = {};
  for(int i = 0; i < 21; i++) {
    pred[i] = w[i][0]*throwing_arm + w[i][1]*velocity + w[i][2]*spin_rate + b[i];
  }
  for(int j = 0; j < 21; j++) {    
    if(pred[j] > 0 and j < 6){
      votes[0] += 1;
    } else if(pred[j] < 0 and j == 0) {
        votes[1] += 1;
    } else if(pred[j] < 0 and j == 1) {
        votes[2] += 1;
    } else if(pred[j] < 0 and j == 2) {
        votes[3] += 1;
    } else if(pred[j] < 0 and j == 3) {
        votes[4] += 1;
    } else if(pred[j] < 0 and j == 4) {
        votes[5] += 1;
    } else if(pred[j] < 0 and j == 5) {
        votes[6] += 1;
    } else if(pred[j] > 0 and j >= 6 and j < 11) {
        votes[1] += 1;
    } else if(pred[j] < 0 and j == 6) {
        votes[2] += 1;
    } else if(pred[j] < 0 and j == 7) {
        votes[3] += 1;
    } else if(pred[j] < 0 and j == 8) {
        votes[4] += 1;
    } else if(pred[j] < 0 and j == 9) {
        votes[5] += 1;
    } else if(pred[j] < 0 and j == 10) {
        votes[6] += 1;
    } else if(pred[j] > 0 and j >= 11 and j < 15) {
        votes[2] += 1;
    } else if(pred[j] < 0 and j == 11) {
        votes[3] += 1;
    } else if(pred[j] < 0 and j == 12) {
        votes[4] += 1;
    } else if(pred[j] < 0 and j == 13) {
        votes[5] += 1;
    } else if(pred[j] < 0 and j == 14) {
        votes[6] += 1;
    } else if(pred[j] > 0 and j >= 15 and j < 18) {
        votes[3] += 1;
    } else if(pred[j] < 0 and j == 15) {
        votes[4] += 1;
    } else if(pred[j] < 0 and j == 16) {
        votes[5] += 1;
    } else if(pred[j] < 0 and j == 17) {
        votes[6] += 1;
    } else if(pred[j] > 0 and j >= 18 and j < 20) {
        votes[4] += 1;
    } else if(pred[j] < 0 and j == 18) {
        votes[5] += 1;
    } else if(pred[j] < 0 and j == 19) {
        votes[6] += 1;
    } else if(pred[j] > 0 and j == 20) {
        votes[5] += 1;
    } else {
        votes[6] += 1;
    }
  }
  int max_votes = 0;
  uint8_t class_label = 0;
  for(int i = 0; i < 21; i++) {
    if(votes[i] > max_votes) {
      max_votes = votes[i];
      class_label = i;
    }
  }
  return class_label;
}


uint8_t predict_experience_seven_pitch(float velocity, float spin_rate, int throwing_arm, int experience_level) {
  int votes[21] = {};
  float w[21][3] = {{}};
  float b[21] = {};
  if (experience_level == 10){
    float w[21][3] = {{-3.14321274e-02, -9.39399279e-01, 4.94412281e-03},
    { 0.00000000e+00,  1.25495704e-03,  2.54144837e-02},
    {-3.29715011e-01,  3.55836538e+00,  7.03227481e-02},
    { 0.00000000e+00,  1.25495704e-03,  2.54144837e-02},
    { 0.00000000e+00,  1.25495704e-03,  2.54144837e-02},
    { 1.39655835e-02, -1.51856744e+00,  7.37943676e-02},
    { 0.00000000e+00,  5.33420182e-03,  3.89636064e-02},
    { 2.05025757e-02,  6.94611384e-02, -1.89103429e-01},
    { 0.00000000e+00,  5.33420182e-03,  3.89636064e-02},
    { 0.00000000e+00,  5.33420182e-03,  3.89636064e-02},
    {-1.82342838e-01,  2.49657323e+00, -4.61061391e-03},
    { 2.11094114e-04, -7.28459565e-04, -2.05332174e-02},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 7.01162493e-04, -3.48996213e-03, -3.72780568e-02},
    {-2.11094111e-04,  7.28459553e-04,  2.05332170e-02},
    {-1.24684610e-04,  7.28536448e-04,  2.05353845e-02},
    { 0.00000000e+00, -1.21125783e-01,  4.08654778e-01},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 7.01162493e-04, -3.48996213e-03, -3.72780568e-02},
    { 7.01162493e-04, -3.48996213e-03, -3.72780568e-02}};
    float b[21] = {4.28517098,  -0.99999999, -22.51406769,  -0.99999999,
    -0.99999999,  -0.49309521,  -1.00000001,  17.15446904,
    -1.00000001,  -1.00000001, -13.77036364,   0.99978893,
    1.0        ,  -1.0        ,   0.9992988 ,  -0.99978892,
    -0.99995845, -38.33202627,  -1.0      ,   0.9992988 ,
    0.9992988};

  } else if(experience_level == 11) {
    float w[21][3] = {{5.55111512e-17, -8.91081708e-01,  1.10928836e-01},
    {1.11774652e-04,  1.54002077e-03,  3.45118353e-02},
    {-2.83189538e-01,  2.14360170e+00,  1.50102214e-01},
    {1.11774652e-04,  1.54002077e-03,  3.45118353e-02},
    {1.11774652e-04,  1.54002077e-03,  3.45118353e-02},
    {3.15945580e-02, -1.53752029e+00,  5.75482066e-02},
    {0.00000000e+00,  8.60304153e-03,  5.73159123e-02},
    {5.43910628e-02,  1.54294078e-01, -2.86387211e-01},
    {0.00000000e+00,  8.60304153e-03,  5.73159123e-02},
    {0.00000000e+00,  8.60304153e-03,  5.73159123e-02},
    {-1.33226763e-15,  2.73909857e+00, -4.25373845e-02},
    {4.74177854e-04, -1.06289306e-03, -3.07733833e-02},
    {0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    {0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    {7.01162493e-04, -3.48996213e-03, -3.72780568e-02},
    {-2.11094111e-04,  7.28459553e-04,  2.05332170e-02},
    {-1.24684610e-04,  7.28536448e-04,  2.05353845e-02},
    {0.00000000e+00, -1.21125783e-01,  4.08654778e-01},
    {0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    {7.01162493e-04, -3.48996213e-03, -3.72780568e-02},
    {7.01162493e-04, -3.48996213e-03, -3.72780568e-02}
  };
  float b[21] = {-3.11623185,  -1.00007451, -18.77413025,  -1.00007451,
  -1.00007451,   0.36465671,  -1.00000001,  17.24020743,
  -1.00000001,  -1.00000001,  -9.46418468,   0.99952582,
  1.0        ,  -1.0        ,   0.99999996,  -1.0        ,
  -1.0        ,   0.64824689,  -1.0        ,   0.99999996,
    0.99999996};
  } else if(experience_level == 12) {
    float w[21][3] = {{0.000000, -0.022381, 0.399793},
    {0.000000, 0.006148, 0.310140},
    {0.000000, 0.025969, 0.978196},
    {0.000000, 0.006148, 0.310140},
    {0.000000, 0.006148, 0.310140},
    {0.000000, -0.012441, 0.524657},
    {0.000000, 0.926895, 1.903927},
    {0.027609, 0.100163, -0.800790},
    {0.000000, 0.926895, 1.903927},
    {0.000000, 0.926895, 1.903927},
    {0.255339, 1.862035, -3.780831},
    {0.000000, -0.012987, -0.514691},
    {0.000000, 0.000000, 0.000000},
    {0.000000, 0.000000, 0.000000},
    {0.000000, -0.192399, -1.277032},
    {0.000000, 0.012987, 0.514691},
    {0.000000, 0.012987, 0.514691},
    {-0.112178, -0.132687, 1.428899},
    {0.000000, 0.000000, 0.000000},
    {0.000000, -0.192399, -1.277032},
    {0.000000, -0.192399, -1.277032}
    };
    float b[21] = {-1.57427653, -1.0        , -6.34836769, -1.0        , -1.0        ,
    -2.38044409, -1.0        ,  2.10008311, -1.0        , -1.0        ,
    5.04533849,  1.0        ,  1.0        , -1.0      ,  1.00000004,
    -1.0        , -1.0        , -4.53592404, -1.0        ,  1.00000004,
    1.00000004};
  } else if(experience_level == 13) {
    float w[21][3] = {
    {0.0, -0.0162818, 0.36519408},
    {0.0, -0.03216325, 0.68107553},
    {0.0, 0.01772613, 0.48038381},
    {0.0, -0.03216325, 0.68107553},
    {0.0, -0.03216325, 0.68107553},
    {0.0, -0.0162818, 0.36519408},
    {0.0, 0.9243589, 1.84486368},
    {0.02617895, -0.11339091, -0.7824636},
    {0.0, 0.9243589, 1.84486368},
    {0.0, 0.9243589, 1.84486368},
    {0.23871426, 1.78320146, -3.62062117},
    {0.0, -0.00767613, -0.52361876},
    {0.0, 0.0, 0.0},
    {0.0, 0.0, 0.0},
    {0.0, -0.17300014, -1.22010207},
    {0.0, -0.0001096, 0.51707081},
    {0.0, -0.0001096, 0.51707081},
    {-0.0823712, 0.12948513, 1.18077545},
    {0.0, 0.0, 0.0},
    {0.0, -0.17300014, -1.22010207},
    {0.0, -0.17300014, -1.22010207}
    };
    float b[21] = {-6.35205742,  -1.00000002, -14.11813032,  -1.00000002,
    -1.00000002,  -6.52266445,  -1.0        ,   5.90381414,
    -1.0        ,  -1.0        ,  -4.89215339,   0.99999895,
    1.0        ,  -1.0        ,   1.0        ,  -0.99999999,
    -0.99999999, -12.65418924,  -1.0        ,   1.0        ,
    1.0};
  } else if(experience_level == 14) {
    float w[21][3] = {{ 0.0, 0.000000, 0.000000 },
    { 0.0, 0.000000, 0.000000 },
    { 0.0, 0.000000, 0.000000 },
    { 0.0, 0.006148, 0.310140 },
    { 0.0, -0.022381, 0.399793 },
    { 0.0, -0.012441, 0.524657 },
    { 0.0, 0.025969, 0.978196 },
    { 0.0, -0.012987, -0.514691 },
    { 0.0, 0.926895, 1.903927 },
    { 0.0, 0.926895, 1.903927 },
    { 0.0, 0.926895, 1.903927 },
    { 0.0, 0.006148, 0.310140 },
    { 0.0, 0.000000, 0.000000 },
    { 0.0, 0.000000, 0.000000 },
    { 0.0, 0.000000, 0.000000 },
    { 0.0, -0.192399, -1.277032 },
    { 0.0, 0.012987, 0.514691 },
    { 0.0, 0.012987, 0.514691 },
    { 0.0, -0.132687, 1.428899 },
    { 0.0, -0.192399, -1.277032 },
    { 0.0, -0.192399, -1.277032 }
    };
    float b[21] = {-4.17462816,  -1.00044695, -10.59836037,  -1.00044695,
    -1.00044695, -21.25525824,  -1.0        ,   4.46814985,
    -1.0        ,  -1.0        ,  -2.00380038,   0.99999731,
    1.0        ,  -1.0        ,   1.0        ,  -1.00000001,
    -1.00000001, -21.0528144 ,  -1.0        ,   1.0        ,
    1.0};
  } else if(experience_level == 15) {
    float w[18][3] = {
    {0.0, -0.014, 0.467},
    {0.0, 0.0, 0.0},
    {0.0, -0.014, 0.467},
    {0.0, -0.003, 0.388},
    {0.0, 0.005, 0.272},
    {0.0, 0.0, 0.0},
    {0.0, -0.003, 0.388},
    {0.0, -0.003, 0.388},
    {0.0, 0.005, 0.272},
    {0.0, -0.014, 0.467},
    {0.0, 0.0, 0.0},
    {0.0, 0.0, 0.0},
    {0.0, -0.014, 0.467},
    {0.0, -0.014, 0.467},
    {0.0, 0.0, 0.0},
    {0.0, 0.005, 0.272},
    {0.0, 0.0, 0.0},
    {0.0, 0.0, 0.0}
    };
    float b[21] = {-1.31007333, -1.0        , -3.81047964, -1.0        , -1.0        ,
    -1.85788695, -1.0        ,  1.64285022, -0.94730924, -1.0        ,
    3.20855837,  1.0        ,  1.0        , -1.0        ,  1.0        ,
    -1.0        , -1.0        , -3.41452246, -1.0        ,  0.98182492,
    1.0};
  } else if(experience_level == 16) {
    float w[21][3] = {{0.00000000e+00, -2.52167352e-02, 6.64504408e-01},
    {0.00000000e+00, 8.36435872e-03, 5.88719067e-01},
    {0.00000000e+00, 1.03409051e-02, 1.10443404e+00},
    {0.00000000e+00, 8.36435872e-03, 5.88719067e-01},
    {0.00000000e+00, 8.36435872e-03, 5.88719067e-01},
    {3.05359597e-02, -1.10970628e-02, 7.96270461e-01},
    {0.00000000e+00, 3.49470199e+00, 5.53851541e+00},
    {3.07393453e-02, 1.56048796e-01, -1.57339004e+00},
    {-2.21515703e-01, 3.41091933e+00, 5.48352924e+00},
    {0.00000000e+00, 3.49470199e+00, 5.53851541e+00},
    {9.51104902e-02, 2.01132224e+00, -6.65968791e+00},
    {7.11944207e-04, -2.75171756e-02, -1.22756883e+00},
    {0.00000000e+00, 0.00000000e+00, 0.00000000e+00},
    {0.00000000e+00, 0.00000000e+00, 0.00000000e+00},
    {0.00000000e+00, -5.49688656e-01, -3.43727662e+00},
    {-1.79357925e-02, 2.75589188e-02, 1.21702899e+00},
    {0.00000000e+00, 2.75269745e-02, 1.22800596e+00},
    {-3.28339430e-02, -1.62388581e-01, 2.53775861e+00},
    {0.00000000e+00, 0.00000000e+00, 0.00000000e+00},
    {1.62250688e-01, -5.28928091e-01, -3.35422957e+00},
    {0.00000000e+00, -5.49688656e-01, -3.43727662e+00},
    };
    float b[21] = {-1.25578595, -1.0        , -3.53041935, -1.0      , -1.0        ,
    -1.73443116, -1.0        ,  1.55576354, -0.77846527, -1.0        ,
    2.83857901,  0.99952537,  1.0        , -1.0        ,  1.0        ,
    -0.98208694, -1.0        , -3.14563168, -1.0        ,  0.83784837,
    1.0};
  } else if(experience_level == 17) {
    float w[21][3] = {{2.77555756e-17, -2.44532001e-02,  6.96387697e-01},
    { 2.77555756e-17,  8.35904613e-03,  6.28815745e-01},
    { 0.00000000e+00,  9.56938947e-03,  1.14873760e+00},
    { 2.77555756e-17,  8.35904613e-03,  6.28815745e-01},
    { 2.77555756e-17,  8.35904613e-03,  6.28815745e-01},
    { 2.65644762e-02, -9.93349077e-03,  8.19555635e-01},
    { 0.00000000e+00,  4.40424014e+00,  6.50665825e+00},
    { 2.68627975e-02,  1.65077118e-01, -1.72571241e+00},
    {-8.00790539e-02,  3.46434313e+00,  5.07336676e+00},
    { 0.00000000e+00,  4.40424014e+00,  6.50665825e+00},
    { 1.30709695e-01,  2.20594365e+00, -7.33821014e+00},
    { 5.55111512e-17, -3.02319089e-02, -1.38571111e+00},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 0.00000000e+00, -6.77196089e-01, -4.10321098e+00},
    { 0.00000000e+00,  3.02319089e-02,  1.38571111e+00},
    { 0.00000000e+00,  3.02319089e-02,  1.38571111e+00},
    {-2.92092062e-02, -1.59083040e-01,  2.69838579e+00},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 1.78314723e-01, -6.46540309e-01, -3.96887002e+00},
    { 9.60461783e-04, -6.76869719e-01, -4.10124068e+00}}; 
    float b[21] = {-1.2134931 , -1.00000001, -3.33240461, -1.00000001, -1.00000001,
    -1.63235727, -0.99999998,  1.48433481, -0.48318587, -0.99999998,
      2.52774475,  1.0        ,  1.0        , -1.0        ,  1.0        ,
    -1.0        , -1.0        , -2.90866174, -1.0        ,  0.82192817,
      0.99923163};
  } else if(experience_level == 18) {
    float w[21][3] = {{ 0.00000000e+00, -6.83735951e-03,  1.47347252e-01},
    { 0.00000000e+00,  2.57710976e-03,  1.00379180e-01},
    {-2.68767897e-01,  9.45955196e-02,  3.58687253e-01},
    { 0.00000000e+00,  2.57710976e-03,  1.00379180e-01},
    { 0.00000000e+00,  2.57710976e-03,  1.00379180e-01},
    { 2.95645963e-02, -6.63094804e-03,  2.41269878e-01},
    { 0.00000000e+00,  1.57498492e-01,  4.99213581e-01},
    { 2.49597990e-02,  1.76627983e-02, -2.21324717e-01},
    { 0.00000000e+00,  1.57498492e-01,  4.99213581e-01},
    { 0.00000000e+00,  1.57498492e-01,  4.99213581e-01},
    { 2.90493509e-01,  1.12577691e+00, -1.66776714e+00},
    { 3.67541105e-05, -3.72005786e-03, -1.31174287e-01},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 0.00000000e+00, -3.49859692e-02, -3.01814044e-01},
    {-1.73472348e-18,  3.72012619e-03,  1.31176697e-01},
    {-1.73472348e-18,  3.72012619e-03,  1.31176697e-01},
    { 0.00000000e+00, -4.96271754e-02,  5.69763457e-01},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 0.00000000e+00, -3.49859692e-02, -3.01814044e-01},
    {-2.29587716e-05, -3.49855665e-02, -3.01810570e-01}}; 
    float b[21] = {-1.93038386, -1.00000001, -8.45891457, -1.00000001, -1.00000001,
    -3.83017812, -1.0        ,  2.36410892, -1.0        , -1.0        ,
    9.77541151,  0.9999755 ,  1.0        , -1.0        ,  1.00000003,
    -0.99999999, -0.99999999, -7.65853764, -1.0        ,  1.00000003,
    1.00000765};
  } else if(experience_level == 19) {
    float w[21][3] = {{ 0.00000000e+00, -6.22385920e-03,  1.46189001e-01},
    { 0.00000000e+00,  2.61467124e-03,  1.05932132e-01},
    {-1.63806467e-01,  7.30017743e-02,  3.35657870e-01},
    { 0.00000000e+00,  2.61467124e-03,  1.05932132e-01},
    { 0.00000000e+00,  2.61467124e-03,  1.05932132e-01},
    { 2.56569060e-02, -5.01468978e-03,  2.25011967e-01},
    { 0.00000000e+00,  2.10967381e-01,  5.95808559e-01},
    { 2.66258584e-02,  1.74684299e-02, -2.28555541e-01},
    { 0.00000000e+00,  2.10967381e-01,  5.95808559e-01},
    { 0.00000000e+00,  2.10967381e-01,  5.95808559e-01},
    { 2.82448899e-01,  9.63142743e-01, -1.82691580e+00},
    { 5.45417428e-05, -4.10559537e-03, -1.44845879e-01},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 0.00000000e+00, -4.25303103e-02, -3.50751671e-01},
    { 0.00000000e+00,  4.10570737e-03,  1.44849831e-01},
    { 0.00000000e+00,  4.10570737e-03,  1.44849831e-01},
    { 0.00000000e+00, -3.92993342e-02,  5.37985459e-01},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 0.00000000e+00, -4.25303103e-02, -3.50751671e-01},
    { 0.00000000e+00, -4.25303103e-02, -3.50751671e-01}};
    float b[21] = {-1.75547109, -1.0       , -7.37869444, -1.0        , -1.0        ,
    -3.26896372, -0.99999998,  2.14639408, -0.99999998, -0.99999998,
    9.00623992,  0.99996364,  1.0        , -1.0        ,  1.00000002,
    -1.00000001, -1.00000001, -6.40685225, -1.0        ,  1.00000002,
    1.00000002};
  } else {
    float w[21][3] = {{0.00000000e+00, -9.02715621e-01,  9.77491538e-02},
    { 4.94073640e-05,  8.14352677e-04,  1.61067184e-02},
    {-5.55835831e-01,  1.81048063e+00,  7.26009077e-02},
    { 4.94073640e-05,  8.14352677e-04,  1.61067184e-02},
    { 4.94073640e-05,  8.14352677e-04,  1.61067184e-02},
    { 3.20928416e-01, -1.25234128e+00,  3.83802961e-02},
    { 0.00000000e+00,  3.27482718e-03,  2.63506881e-02},
    { 2.09213132e-03,  6.71216087e-03, -6.43026232e-02},
    { 0.00000000e+00,  3.27482718e-03,  2.63506881e-02},
    { 0.00000000e+00,  3.27482718e-03,  2.63506881e-02},
    { 2.08232829e-01,  3.08854999e+00, -7.23585217e-02},
    { 7.67145641e-05, -4.60388263e-04, -1.23778546e-02},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 0.00000000e+00, -1.51181495e-03, -1.99164649e-02},
    {-4.65142726e-05,  4.60405933e-04,  1.23783297e-02},
    {-4.65142726e-05,  4.60405933e-04,  1.23783297e-02},
    { 1.99216265e-01, -2.24701324e+00,  5.75598824e-02},
    { 0.00000000e+00,  0.00000000e+00,  0.00000000e+00},
    { 0.00000000e+00, -1.51181495e-03, -1.99164649e-02},
    { 0.00000000e+00, -1.51181495e-03, -1.99164649e-02}};
    float b[21] = {-5.45398808,  -1.00003293, -26.88877061,  -1.00003293,
    -1.00003293,   1.32495099,  -1.00000001,   9.33491218,
    -1.00000001,  -1.00000001, -17.18962364,   0.99992325,
    1.0        ,  -1.0        ,   1.00000001,  -0.99998449,
    -0.99998449,   5.19839461,  -1.0        ,   1.00000001,
    1.00000001};
  } 
  float pred[21] = {};
  for(int i = 0; i < 21; i++) {
    pred[i] = w[i][0]*throwing_arm + w[i][1]*velocity + w[i][2]*spin_rate + b[i];
  }
  for(int j = 0; j < 21; j++) {    
    if(pred[j] > 0 and j < 6){
      votes[0] += 1;
    } else if(pred[j] < 0 and j == 0) {
        votes[1] += 1;
    } else if(pred[j] < 0 and j == 1) {
        votes[2] += 1;
    } else if(pred[j] < 0 and j == 2) {
        votes[3] += 1;
    } else if(pred[j] < 0 and j == 3) {
        votes[4] += 1;
    } else if(pred[j] < 0 and j == 4) {
        votes[5] += 1;
    } else if(pred[j] < 0 and j == 5) {
        votes[6] += 1;
    } else if(pred[j] > 0 and j >= 6 and j < 11) {
        votes[1] += 1;
    } else if(pred[j] < 0 and j == 6) {
        votes[2] += 1;
    } else if(pred[j] < 0 and j == 7) {
        votes[3] += 1;
    } else if(pred[j] < 0 and j == 8) {
        votes[4] += 1;
    } else if(pred[j] < 0 and j == 9) {
        votes[5] += 1;
    } else if(pred[j] < 0 and j == 10) {
        votes[6] += 1;
    } else if(pred[j] > 0 and j >= 11 and j < 15) {
        votes[2] += 1;
    } else if(pred[j] < 0 and j == 11) {
        votes[3] += 1;
    } else if(pred[j] < 0 and j == 12) {
        votes[4] += 1;
    } else if(pred[j] < 0 and j == 13) {
        votes[5] += 1;
    } else if(pred[j] < 0 and j == 14) {
        votes[6] += 1;
    } else if(pred[j] > 0 and j >= 15 and j < 18) {
        votes[3] += 1;
    } else if(pred[j] < 0 and j == 15) {
        votes[4] += 1;
    } else if(pred[j] < 0 and j == 16) {
        votes[5] += 1;
    } else if(pred[j] < 0 and j == 17) {
        votes[6] += 1;
    } else if(pred[j] > 0 and j >= 18 and j < 20) {
        votes[4] += 1;
    } else if(pred[j] < 0 and j == 18) {
        votes[5] += 1;
    } else if(pred[j] < 0 and j == 19) {
        votes[6] += 1;
    } else if(pred[j] > 0 and j == 20) {
        votes[5] += 1;
    } else {
        votes[6] += 1;
    }
  }
  int max_votes = 0;
  uint8_t class_label = 0;
  for(int i = 0; i < 21; i++) {
    if(votes[i] > max_votes) {
      max_votes = votes[i];
      class_label = i;
    }
  }
  return class_label;
}

